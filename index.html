<!DOCTYPE html>
<html lang="ja">
<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1KS39WGLMK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1KS39WGLMK');
</script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preload" as="image" href="images/top/top.webp" fetchpriority="high">

    <title>珈琲オルテガ | 新潟市中央区の手廻し焙煎・ネルドリップ深煎り珈琲店</title>
    <meta name="description" content="新潟県新潟市中央区にある自家焙煎店「珈琲オルテガ」の公式サイト。手廻し焙煎とネルドリップにこだわり、深煎りを中心とした「余韻と色気」のあるコーヒーを提供します。店舗での喫茶ほか、珈琲豆の店頭販売やオンラインショップ（BASE）での通販も行っています。">
    <meta name="keywords" content="珈琲オルテガ,新潟 珈琲,新潟 カフェ,手廻し焙煎,ネルドリップ,深煎りコーヒー,自家焙煎,コーヒー豆 通販,新潟 喫茶店,通販,ギフト,お取り寄せ,中央区，学校町,中央区学校町">
    
    <link rel="icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <meta property="og:type" content="website">
    <meta property="og:title" content="珈琲オルテガ | COFFEE ORTEGA">
    <meta property="og:description" content="手廻し焙煎、ネルドリップ. 深煎りを中心とした余韻と、色気のある珈琲を。">
    <meta property="og:image" content="https://ortegacaffe.base.shop/images/top/top.webp">
    <meta property="og:site_name" content="珈琲オルテガ">
    <meta name="twitter:card" content="summary_large_image">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;500;700&family=Noto+Sans+JP:wght@300;400&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CafeOrCoffeeShop",
      "name": "珈琲オルテガ",
      "image": "images/top/top.webp",
      "url": "https://ortegacaffe.base.shop/",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "藤塚浜", 
        "addressLocality": "新発田市",
        "addressRegion": "新潟県",
        "postalCode": "957-0231",
        "addressCountry": "JP"
      }
    }
    </script>

    <style>
        :root { 
            --mobile-br: block;
        }
        
        @media (min-width: 768px) {
            :root { --mobile-br: none; }
        }

        .m-br { display: var(--mobile-br); }

        html { 
            background-color: #0c0a09;
            scroll-padding-top: 80px;
        }

        html.smooth-scroll {
            scroll-behavior: smooth;
        }

        body.lock-scroll {
            overflow: hidden; 
        }

        body { 
            background-color: #0c0a09; 
            color: #d6d3d1; 
            overflow-x: hidden; 
            position: relative;
            -webkit-font-smoothing: antialiased;
            width: 100%;
        }

        .ib { display: inline-block; }

        .font-serif { 
            font-family: 'Noto Serif JP', serif; 
            text-shadow: 0 0 0.5px rgba(214, 211, 209, 0.25);
            letter-spacing: 0.1em;
        }

        #texture-layer {
            position: fixed; inset: 0; width: 100%; height: 100%;
            z-index: 500;
            pointer-events: none;
            opacity: 0.15;
            mix-blend-mode: overlay;
            background-repeat: repeat;
            background-size: 500px auto; 
        }

        #noise-layer {
            position: fixed; inset: -20%; width: 140%; height: 140%;
            opacity: 0.04; pointer-events: none; z-index: 600;
            animation: noise-anim 0.4s steps(3) infinite;
        }

        body::after {
            content: "";
            position: fixed; inset: 0;
            box-shadow: inset 0 0 15vw rgba(0,0,0,0.8);
            pointer-events: none; z-index: 700;
        }

        #opening-overlay {
            position: fixed; inset: 0; background: #0c0a09; z-index: 9999;
            display: flex; align-items: center; justify-content: center;
            transition: opacity 1.5s ease-in-out, visibility 1.5s;
        }

        .opening-logo {
            font-family: 'Noto Serif JP', serif; 
            letter-spacing: 0.8em; 
            color: #fffaf0;
            opacity: 0;
            filter: url(#sugar-melt-filter);
            animation: logoFade 2.5s ease-in-out forwards;
        }

        @keyframes logoFade {
            0% { opacity: 0; transform: translateY(0); }
            20% { opacity: 1; transform: translateY(0); }
            45% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(60px); }
        }

        .opening-logo span {
            display: inline-block;
            will-change: transform, opacity;
            animation: letterMelt 2.5s ease-in-out forwards;
        }

        @keyframes letterMelt {
            0%, 45% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(30px) rotate(8deg); }
        }

        .overlay-hidden { opacity: 0; visibility: hidden; pointer-events: none; }

        section {
            position: relative;
            background-color: #0c0a09;
            margin-top: -1px;
            padding-top: 1px;
            z-index: 10;
        }

        .reveal {
            opacity: 0; transform: translateY(30px);
            transition: opacity 1.2s cubic-bezier(0.2, 0.8, 0.2, 1), transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
            will-change: opacity, transform;
        }
        .reveal.active { opacity: 1; transform: translateY(0); }

        @keyframes noise-anim {
            0% { transform: translate(0,0); }
            10% { transform: translate(-1%,-1%); }
            20% { transform: translate(1%,1%); }
            30% { transform: translate(-2%,0); }
            40% { transform: translate(1%,-1%); }
            50% { transform: translate(-1%,1%); }
            60% { transform: translate(2%,1%); }
            70% { transform: translate(-1%,-1%); }
            80% { transform: translate(1%,2%); }
            90% { transform: translate(-2%,-1%); }
            100% { transform: translate(0,0); }
        }

        .nav-scrolled {
            background-color: rgba(12, 10, 9, 0.95); backdrop-filter: blur(12px);
            padding-top: 0.8rem; padding-bottom: 0.8rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        #pc-nav-container a {
            position: relative;
            transition: color 0.4s ease;
        }
        #pc-nav-container a.nav-active {
            color: #ffffff !important;
        }
        #pc-nav-container a::after {
            content: "";
            position: absolute;
            bottom: -6px;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: #ffffff;
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        #pc-nav-container a.nav-active::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        #mobile-menu-overlay {
            transition: opacity 0.4s ease, visibility 0.4s;
            opacity: 0; visibility: hidden;
            backdrop-filter: blur(15px);
        }
        #mobile-menu-overlay.active { opacity: 1; visibility: visible; }
        .mobile-link { opacity: 0; transform: translateY(16px); transition: opacity 0.5s, transform 0.5s; }
        #mobile-menu-overlay.active .mobile-link { opacity: 1; transform: translateY(0); }

        #news-modal { 
            transition: opacity 0.3s ease, visibility 0.3s; 
            opacity: 0; 
            visibility: hidden; 
        }
        #news-modal.active { opacity: 1; visibility: visible; }
        #news-modal-content {
            will-change: transform, opacity;
            transform: translateY(15px); opacity: 0;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.4s;
        }
        #news-modal.active #news-modal-content { transform: translateY(0); opacity: 1; }

        @keyframes drift {
            0% { transform: scale(1.05) translate(0,0); }
            100% { transform: scale(1.15) translate(-1%, -0.5%); }
        }
        #hero-bg { animation: drift 20s ease-in-out infinite alternate; }

        #concept-image, .news-item img {
            filter: sepia(5%) contrast(1.05) brightness(0.9);
            transition: filter 1s ease, transform 2s ease;
        }

        @media (hover: hover) {
            #concept-image { filter: sepia(15%) contrast(1.1) brightness(0.85); }
            #concept-image:hover { transform: scale(1.05); filter: sepia(0%) contrast(1.0) brightness(1.0); }
            .group:hover img { filter: sepia(0%) contrast(1.0) brightness(1.0); }
        }

        .slide-img {
            position: absolute; inset: 0; opacity: 0;
            transition: opacity 1.5s ease-in-out, filter 1.0s ease;
            object-fit: cover; width: 100%; height: 100%;
            filter: grayscale(100%) brightness(0.7);
            z-index: 1;
        }
        
        .slide-img.active { 
            opacity: 0.8; 
            z-index: 2; 
            filter: grayscale(100%) brightness(0.7); 
        }

        #access-slideshow:hover .slide-img.active,
        #access-slideshow.is-colored .slide-img.active {
            filter: grayscale(0%) brightness(1.0);
            opacity: 1;
        }

        /* --- Google Map Smooth Hover Design --- */
        #map-container {
            position: relative;
            overflow: hidden;
            background-color: #0c0a09;
        }

        #access-map {
            /* 初期状態：モノクロ・色反転（ダーク化） */
            filter: grayscale(100%) invert(92%) contrast(83%) brightness(95%);
            /* じわーっと色を戻すための設定 */
            transition: filter 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 800;
            /* 最初は地図の操作を無効にしてページスクロールを優先する */
            pointer-events: none;
        }

        /* ホバー時またはアクティブクラス付与時に通常のカラーに戻し、操作を有効化 */
        #map-container:hover #access-map,
        #map-container.is-active #access-map {
            filter: grayscale(30%) invert(0%) contrast(95%) brightness(85%);
            pointer-events: auto;
        }

        /* 地図の上の目に見えないレイヤー（スマホの最初のタッチ用） */
        /* 改善案のCSSイメージ */
#map-overlay::after {
    content: "Tap to interact";
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    background: rgba(0,0,0,0.6);
    padding: 8px 16px;
    font-size: 12px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
}
#map-container:hover #map-overlay::after {
    opacity: 1;
}
        #map-container.is-active #map-overlay {
            display: none;
        }

        body.menu-open #navbar #hamburger-btn { opacity: 0; pointer-events: none; }
    </style>
</head>
    <body class="selection:bg-stone-100 selection:text-stone-900">

    <svg style="position: fixed; width: 0; height: 0; pointer-events: none;">
      <filter id="sugar-melt-filter">
        <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" result="noise" />
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="0" result="distort">
          <animate attributeName="scale" values="0;0;45" dur="2.5s" repeatCount="1" />
        </feDisplacementMap>
        <feGaussianBlur in="distort" stdDeviation="0" result="blur">
          <animate attributeName="stdDeviation" values="0;0;12" dur="2.5s" repeatCount="1" />
        </feGaussianBlur>
        <feComponentTransfer in="blur" result="final">
          <feFuncA type="linear" slope="1">
            <animate attributeName="slope" values="1;1;0" dur="2.5s" repeatCount="1" />
          </feFuncA>
        </feComponentTransfer>
      </filter>
    </svg>

    <div id="texture-layer"></div>
    <div id="noise-layer"></div>

    <div id="opening-overlay">
        <div class="opening-logo text-lg uppercase tracking-[1em]" id="opening-text"></div>
    </div>

    <nav id="navbar" class="fixed w-full z-[1000] transition-all duration-1000 py-6">
        <div class="container mx-auto px-6 md:px-8 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer z-[1010]" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <img id="nav-logo-img" src="" alt="珈琲オルテガ ロゴ" class="w-8 h-8 object-contain">
                <h1 id="nav-logo-text" class="text-sm font-serif font-medium tracking-[0.4em] text-white uppercase relative"></h1>
            </div>
            <div id="pc-nav-container" class="hidden md:flex items-center gap-10"></div>
            <button id="hamburger-btn" type="button" class="md:hidden z-[1010] text-white p-2 focus:outline-none" aria-label="メニューを開く">
                <i data-lucide="menu" class="w-6 h-6 transition-transform duration-300"></i>
            </button>
        </div>
    </nav>

    <div id="mobile-menu-overlay" class="fixed inset-0 bg-[#0c0a09]/95 z-[2000] flex flex-col justify-center items-center">
        <button onclick="toggleMenu()" type="button" class="absolute top-7 right-6 text-white p-2 focus:outline-none" aria-label="メニューを閉じる">
            <i data-lucide="x" class="w-8 h-8"></i>
        </button>
        <div id="mobile-nav-container" class="flex flex-col gap-8 text-center"></div>
    </div>

    <header class="relative h-screen flex items-center justify-center overflow-hidden bg-stone-950">
        <div class="absolute inset-0">
            <img id="hero-bg" src="" alt="珈琲オルテガ メインビジュアル" class="w-full h-full object-cover contrast-[1.05] brightness-[0.9]" fetchpriority="high">
            <div class="absolute inset-0 bg-[radial-gradient(circle,rgba(0,0,0,0.4)_0%,transparent_70%)]"></div>
            <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60"></div>
        </div>
        <div class="relative z-10 text-center px-6">
            <p id="hero-title" class="text-3xl md:text-5xl font-serif text-white mb-6 tracking-[0.3em] leading-[2.2] reveal drop-shadow-[0_2px_15px_rgba(0,0,0,0.9)]"></p>
            <p id="hero-subtitle" class="text-stone-200 text-[11px] md:text-[12px] tracking-[0.7em] uppercase font-light reveal drop-shadow-[0_2px_10px_rgba(0,0,0,0.9)]"></p>
        </div>
    </header>

    <section id="news" class="py-20 px-8 bg-stone-950 border-b border-white/5 relative">
        <div class="container mx-auto max-w-4xl">
            <div class="text-center mb-12 reveal">
                <p id="news-label" class="text-[11px] text-stone-300 tracking-[0.6em] uppercase mb-4 font-bold"></p>
                <h2 id="news-title" class="text-xl font-serif text-white tracking-[0.5em]"></h2>
            </div>
            <div id="news-container" class="space-y-6 reveal"></div>
            <div class="mt-10 text-center reveal">
                <a id="news-more-link" href="" target="_blank" rel="noopener noreferrer" class="text-[11px] tracking-[0.2em] text-stone-300 hover:text-stone-100 transition-colors border-b border-stone-800 hover:border-stone-400 pb-0.5"></a>
            </div>
        </div>
    </section>

    <section id="concept" class="py-24 px-8 bg-stone-950">
        <div class="container mx-auto max-w-5xl">
            <div class="grid md:grid-cols-2 gap-16 items-center">
                <div class="space-y-8 reveal">
                    <div>
                        <p id="concept-label" class="text-[11px] text-stone-300 tracking-[0.6em] uppercase mb-6 font-bold"></p>
                        <h2 id="concept-title" class="text-2xl md:text-3xl font-serif text-white leading-relaxed tracking-[0.15em]"></h2>
                    </div>
                    <div id="concept-text" class="space-y-6 text-stone-300 leading-[2.4] text-[14px] font-light tracking-widest"></div>
                </div>
                <div class="reveal">
                    <div class="aspect-[3/4] overflow-hidden border border-white/5 max-w-sm mx-auto shadow-2xl bg-stone-900">
                        <img id="concept-image" src="" alt="珈琲オルテガ コンセプトイメージ" loading="lazy" class="w-full h-full object-cover grayscale-[0.2] brightness-[0.75]">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="menu" class="py-24 bg-stone-950">
        <div class="container mx-auto px-8 max-w-4xl">
            <div class="text-center mb-16 reveal">
                <p id="menu-label" class="text-[11px] text-stone-300 tracking-[0.6em] uppercase mb-4 font-bold"></p>
                <h2 id="menu-title" class="text-xl font-serif text-white tracking-[0.5em]"></h2>
            </div>
            <div id="menu-items-container" class="grid md:grid-cols-2 gap-x-12 gap-y-16 lg:gap-x-20"></div>
        </div>
    </section>

    <section id="onlinestore" class="py-24 bg-stone-950 border-t border-white/5">
        <div class="container mx-auto px-8 max-w-6xl">
            <div class="text-center mb-16 reveal">
    <p id="store-label" class="text-[11px] text-stone-300 tracking-[0.6em] uppercase mb-4 font-bold"></p>
    <h2 id="store-title" class="text-xl font-serif text-white tracking-[0.5em]"></h2>
    <p id="store-note" class="text-[10px] text-stone-500 tracking-widest mt-4 opacity-60"></p> 
</div>
            <div id="store-items-container" class="grid grid-cols-1 md:grid-cols-3 gap-x-12 gap-y-16"></div>
            <div class="mt-20 text-center reveal">
                <a id="store-btn-link" href="" target="_blank" rel="noopener noreferrer" class="inline-block border border-stone-800 px-16 py-4 text-[11px] tracking-[0.4em] uppercase text-stone-300 hover:border-white hover:text-white transition-all"></a>
            </div>
        </div>
    </section>

    <section id="access" class="py-16 bg-stone-950 border-t border-white/5 relative">
        <div class="container mx-auto px-6 max-w-6xl">
            <div class="text-center mb-10 reveal">
                <p id="access-label" class="text-[11px] text-stone-300 tracking-[0.6em] uppercase mb-2 font-bold"></p>
                <h2 id="access-title" class="text-xl font-serif text-white tracking-[0.5em]"></h2>
            </div>
            <div class="border border-white/5 bg-white/[0.01] overflow-hidden shadow-2xl reveal">
                <div class="p-8 md:p-10 text-center border-b border-white/5">
                    <h3 id="access-name" class="font-serif text-2xl tracking-[0.5em] uppercase text-white mb-2"></h3>
                    <p id="access-sub" class="text-[11px] text-stone-300 tracking-[0.6em] uppercase font-bold mb-10 md:mb-12"></p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-6 items-start text-center md:text-left">
                        <div class="space-y-1">
                            <p id="lbl-contact" class="text-[11px] text-stone-500 tracking-widest uppercase mb-2"></p>
                            <p id="access-email" class="text-[14px] font-serif text-stone-300 tracking-widest mb-4"></p>
                            <div class="flex justify-center md:justify-start gap-5 items-center">
                                <a id="footer-insta" href="" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity"><img id="footer-insta-img" src="" class="w-5 h-5" alt="Instagram"></a>
                                <a id="footer-fb" href="" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity"><img id="footer-fb-img" src="" class="w-5 h-5" alt="Facebook"></a>
                                <a id="footer-threads" href="" target="_blank" rel="noopener noreferrer" class="hover:opacity-80 transition-opacity"><img id="footer-threads-img" src="" class="w-5 h-5 invert opacity-80" alt="Threads"></a>
                            </div>
                        </div>
                        <div class="space-y-1">
                            <p id="lbl-open" class="text-[11px] text-stone-500 tracking-widest uppercase mb-2"></p>
                            <p id="access-hours" class="text-[15px] tracking-[0.1em] text-stone-200 font-medium"></p>
                            <p id="access-schedule" class="text-[11px] text-stone-300 tracking-widest pt-1"></p>
                        </div>
                        <div class="space-y-1">
                            <p id="lbl-address" class="text-[11px] text-stone-500 tracking-widest uppercase mb-2"></p>
                            <p id="access-address" class="text-[15px] tracking-[0.15em] text-stone-200"></p>
                            <p id="access-note" class="text-[11px] text-stone-300 tracking-wider font-medium"></p>
                        </div>
                    </div>
                </div>
                <div class="grid md:grid-cols-2 gap-2 bg-stone-900/50">
                    <div id="map-container" class="order-1 md:order-2 aspect-video md:aspect-auto md:h-80 w-full bg-[#0c0a09]">
                        <iframe id="access-map" src="about:blank" data-src="" class="w-full h-full" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                        <div id="map-overlay"></div>
                    </div>
                    <div id="access-slideshow" class="order-2 md:order-1 aspect-video md:aspect-auto md:h-80 overflow-hidden relative bg-stone-900 cursor-pointer"></div>
                </div>
            </div>
        </div>
    </section>

    <footer id="footer" class="bg-stone-950 border-t border-white/5">
        <div class="container mx-auto px-8 text-center pt-8 pb-8">
            <p id="footer-copy" class="font-serif text-[11px] tracking-[0.2em] text-stone-500 uppercase py-2 leading-relaxed"></p>
        </div>
    </footer>

    <div id="news-modal" class="fixed inset-0 z-[3000] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/85" onclick="closeNewsModal()"></div>
        <div id="news-modal-content" class="relative bg-stone-900 border border-white/10 w-full max-w-lg max-h-[85vh] overflow-y-auto shadow-2xl p-8 md:p-10">
            <button onclick="closeNewsModal()" type="button" class="absolute top-4 right-4 text-stone-500 hover:text-white transition-colors p-2"><i data-lucide="x" class="w-6 h-6"></i></button>
            <div class="space-y-6">
                <div class="flex items-center gap-4 mb-2">
                    <span id="modal-date" class="text-[11px] font-serif text-stone-500"></span>
                    <span id="modal-tag" class="text-[11px] tracking-[0.2em] text-stone-300 border border-stone-700 px-2 py-0.5"></span>
                </div>
                <h3 id="modal-title" class="text-xl md:text-2xl font-serif text-white leading-relaxed"></h3>
                <div id="modal-image-container" class="hidden aspect-video w-full overflow-hidden border border-white/5 my-4">
                    <img id="modal-image" src="" class="w-full h-full object-cover">
                </div>
                <div class="w-10 h-[1px] bg-white/10"></div>
                <p id="modal-body" class="text-[14px] text-stone-300 font-light leading-loose tracking-wider text-justify whitespace-pre-wrap"></p>
                <div class="pt-8 text-center">
                    <button onclick="closeNewsModal()" type="button" class="text-[11px] tracking-[0.3em] uppercase text-stone-300 hover:text-white border border-stone-700 px-8 py-3 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="content.js"></script>

    <script>
        const bodyScrollLock = {
            scrollPosition: 0,
            paddingRight: 0,

            lock() {
                this.scrollPosition = window.scrollY || window.pageYOffset;
                const scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;
                this.paddingRight = scrollBarWidth;
                
                document.documentElement.classList.remove('smooth-scroll');
                
                const body = document.body;
                const navbar = document.getElementById('navbar');

                if (scrollBarWidth > 0) {
                    body.style.paddingRight = `${scrollBarWidth}px`;
                    if (navbar) navbar.style.paddingRight = `${scrollBarWidth}px`;
                }

                body.style.position = 'fixed';
                body.style.top = `-${this.scrollPosition}px`;
                body.style.width = '100%';
                body.classList.add('lock-scroll');
            },

            unlock() {
                const body = document.body;
                const navbar = document.getElementById('navbar');

                body.classList.remove('lock-scroll');
                body.style.removeProperty('position');
                body.style.removeProperty('top');
                body.style.removeProperty('width');

                if (this.paddingRight > 0) {
                    body.style.removeProperty('padding-right');
                    if (navbar) navbar.style.removeProperty('padding-right');
                }
                
                window.scrollTo(0, this.scrollPosition);

                setTimeout(() => {
                    document.documentElement.classList.add('smooth-scroll');
                }, 50);
            }
        };

        function checkNavScroll() {
            const nav = document.getElementById('navbar');
            const scrollTop = window.scrollY || document.documentElement.scrollTop;
            if (scrollTop > 80) nav.classList.add('nav-scrolled');
            else nav.classList.remove('nav-scrolled');
        }

        function renderContent() {
            const config = siteContent;
            document.title = config.common.pageTitle;
            
            const logoText = config.nav.logoText;
            const splitLogo = logoText.split('').map((char, i) => {
                return `<span style="animation-delay: ${i * 0.08}s">${char}</span>`;
            }).join('');
            document.getElementById('opening-text').innerHTML = splitLogo;

            document.getElementById('noise-layer').style.backgroundImage = `url("${config.images.noiseOverlay}")`;
            if(config.images.textureOverlay) {
                document.getElementById('texture-layer').style.backgroundImage = `url("${config.images.textureOverlay}")`;
            }

            document.getElementById('nav-logo-text').innerHTML = config.nav.logoText;
            document.getElementById('nav-logo-img').src = config.images.logo;

            document.getElementById('pc-nav-container').innerHTML = config.nav.items.map(item => `
                <a href="${item.link}" class="text-[10px] tracking-[0.4em] text-stone-300 hover:text-white transition-colors uppercase font-medium">
                    ${item.label}
                </a>
            `).join('');

            document.getElementById('mobile-nav-container').innerHTML = config.nav.items.map((item, index) => {
                const delay = 100 + (index * 50);
                return `<a href="${item.link}" class="mobile-link text-xl font-serif text-white tracking-[0.3em]" style="transition-delay: ${delay}ms">${item.label}</a>`;
            }).join('');

            document.getElementById('hero-title').innerHTML = config.hero.title;
            document.getElementById('hero-subtitle').innerHTML = config.hero.subTitle;
            document.getElementById('hero-bg').src = config.hero.image;

            document.getElementById('news-label').innerHTML = config.news.sectionLabel;
            document.getElementById('news-title').innerHTML = config.news.sectionTitle;
            const newsMoreLink = document.getElementById('news-more-link');
            newsMoreLink.innerHTML = config.news.viewMoreText;
            newsMoreLink.href = config.common.links.instagram;

            document.getElementById('news-container').innerHTML = config.news.articles.map(item => `
                <div class="news-item border-b border-white/5 pb-6 group cursor-pointer transition-colors"
                     data-date="${item.date}" data-tag="${item.tag}" data-title="${item.title}" data-image="${item.image}">
                    <div class="hidden-content hidden">${item.content}</div>
                    <div class="flex flex-col md:flex-row md:items-baseline gap-2 md:gap-8 pointer-events-none">
                        <div class="flex items-center gap-4">
                            <span class="text-[11px] font-serif text-stone-500">${item.date}</span>
                            <span class="text-[10px] tracking-[0.2em] text-stone-300 border border-stone-800 px-2 py-0.5 min-w-[60px] text-center font-bold">${item.tag}</span>
                        </div>
                        <p class="text-[14px] text-stone-300 font-light tracking-wider group-hover:text-white transition-colors">${item.title}</p>
                    </div>
                </div>
            `).join('');

            document.getElementById('concept-label').innerHTML = config.concept.sectionLabel;
            document.getElementById('concept-title').innerHTML = config.concept.title;
            document.getElementById('concept-text').innerHTML = config.concept.text;
            document.getElementById('concept-image').src = config.concept.image;

            document.getElementById('menu-label').innerHTML = config.menu.sectionLabel;
            document.getElementById('menu-title').innerHTML = config.menu.sectionTitle;
            document.getElementById('menu-items-container').innerHTML = config.menu.items.map(item => {
                const hasImage = item.image && item.image !== "";
                return `
                    <div class="flex items-center gap-6 reveal group">
                        ${hasImage ? `
                        <div class="w-20 h-20 md:w-24 md:h-24 flex-shrink-0 overflow-hidden border border-stone-800 bg-stone-900">
                            <img src="${item.image}" loading="lazy" class="w-full h-full object-cover transition-all duration-700">
                        </div>` : ''}
                        <div class="flex-grow space-y-2">
                            <div class="flex justify-between items-baseline border-b border-white/5 pb-2">
                                <div class="space-y-1">
                                    <p class="text-[15px] tracking-[0.1em] text-stone-200 group-hover:text-white transition-colors font-medium">${item.name}</p>
                                    <p class="text-[10px] text-stone-500 tracking-wider font-bold uppercase">${item.category}</p>
                                </div>
                                <span class="font-serif text-[14px] text-stone-300 ml-4">${item.price}</span>
                            </div>
                            <p class="text-[11px] text-stone-500 italic font-light">${item.subName}</p>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('store-label').innerHTML = config.store.sectionLabel;
            document.getElementById('store-title').innerHTML = config.store.sectionTitle;
            document.getElementById('store-note').innerHTML = config.store.note || "";
            const storeBtn = document.getElementById('store-btn-link');
            storeBtn.innerHTML = config.store.buttonText;
            storeBtn.href = config.common.links.baseShop;

            document.getElementById('store-items-container').innerHTML = config.store.items.map((item, index) => `
                <a href="${config.common.links.baseShop}" target="_blank" rel="noopener noreferrer" class="group block text-center reveal" style="transition-delay: ${index * 0.1}s;">
                    <div class="aspect-square overflow-hidden bg-stone-950 mb-8 border border-white/5 mx-auto max-w-xs md:max-w-none">
                        <img src="${item.image}" loading="lazy" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-[1.2s]">
                    </div>
                    <h3 class="text-[12px] tracking-[0.3em] text-stone-200 mb-2 group-hover:text-white transition-colors uppercase font-medium">${item.name}</h3>
                    <p class="text-[11px] text-stone-500 font-serif italic">${item.price}</p>
                </a>
            `).join('');

            document.getElementById('access-label').innerHTML = config.access.sectionLabel;
            document.getElementById('access-title').innerHTML = config.access.sectionTitle;
            document.getElementById('access-name').innerHTML = config.access.shopName;
            document.getElementById('access-sub').innerHTML = config.access.subTitle;
            
            document.getElementById('lbl-contact').innerText = config.access.labels.contact;
            document.getElementById('lbl-open').innerText = config.access.labels.open;
            document.getElementById('lbl-address').innerText = config.access.labels.address;

            document.getElementById('access-hours').innerHTML = config.access.businessHours;
            document.getElementById('access-schedule').innerHTML = config.access.schedule;
            document.getElementById('access-address').innerHTML = config.access.address;
            document.getElementById('access-note').innerHTML = config.access.note;
            document.getElementById('access-email').innerHTML = `<a href="mailto:${config.access.email}" class="hover:text-white underline decoration-white/10 underline-offset-4">${config.access.email}</a>`;
            
            document.getElementById('access-map').setAttribute('data-src', config.access.mapEmbed);
            
            const ss = document.getElementById('access-slideshow');
            ss.innerHTML = '';
            config.access.shopImages.forEach(function(src, index) {
                const img = document.createElement('img');
                img.src = src; img.className = 'slide-img' + (index === 0 ? ' active' : '');
                img.setAttribute('loading', 'lazy');
                ss.appendChild(img);
            });
            startSlideshow();

            document.getElementById('footer-insta').href = config.common.links.instagram;
            document.getElementById('footer-insta-img').src = config.images.icons.instagram;
            document.getElementById('footer-fb').href = config.common.links.facebook;
            document.getElementById('footer-fb-img').src = config.images.icons.facebook;
            document.getElementById('footer-threads').href = config.common.links.threads;
            document.getElementById('footer-threads-img').src = config.images.icons.threads;
            document.getElementById('footer-copy').innerHTML = config.footer.copyRight;

            lucide.createIcons();
            attachNewsEvents();
        }

        let slideInterval; 
        function startSlideshow() {
            const slides = document.querySelectorAll('.slide-img');
            if (slides.length <= 1) return;
            if (slideInterval) clearInterval(slideInterval);
            let cur = 0;
            slideInterval = setInterval(function() {
                slides[cur].classList.remove('active');
                cur = (cur + 1) % slides.length;
                slides[cur].classList.add('active');
            }, 4000);
        }

        const newsModal = document.getElementById('news-modal');

        function attachNewsEvents() {
            document.querySelectorAll('.news-item').forEach(function(item) {
                item.addEventListener('click', function() {
                    document.getElementById('modal-date').innerHTML = item.getAttribute('data-date');
                    document.getElementById('modal-tag').innerHTML = item.getAttribute('data-tag');
                    document.getElementById('modal-title').innerHTML = item.getAttribute('data-title');
                    document.getElementById('modal-body').innerHTML = item.querySelector('.hidden-content').innerHTML;
                    const src = item.getAttribute('data-image');
                    const container = document.getElementById('modal-image-container');
                    if (src) { document.getElementById('modal-image').src = src; container.classList.remove('hidden'); }
                    else { container.classList.add('hidden'); }
                    newsModal.classList.add('active');
                    bodyScrollLock.lock();
                });
            });
        }

        function closeNewsModal() {
            newsModal.classList.remove('active');
            bodyScrollLock.unlock();
            setTimeout(function() { 
                document.getElementById('modal-image').src = '';
            }, 300);
        }

        const hamburgerBtn = document.getElementById('hamburger-btn');
        const menuOverlay = document.getElementById('mobile-menu-overlay');
        let isMenuOpen = false;

        function toggleMenu() {
            isMenuOpen = !isMenuOpen;
            if(isMenuOpen) {
                menuOverlay.classList.add('active');
                document.body.classList.add('menu-open');
                bodyScrollLock.lock();
            } else {
                menuOverlay.classList.remove('active');
                document.body.classList.remove('menu-open');
                bodyScrollLock.unlock();
            }
        }

        hamburgerBtn.addEventListener('click', () => toggleMenu());

        document.getElementById('mobile-nav-container').addEventListener('click', function(e) {
            const link = e.target.closest('a');
            if(link) {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                toggleMenu();
                setTimeout(() => {
                    const targetEl = document.querySelector(targetId);
                    if(targetEl) {
                        const offset = 80;
                        const targetPos = targetEl.getBoundingClientRect().top + window.pageYOffset - offset;
                        window.scrollTo({ top: targetPos, behavior: 'smooth' });
                    }
                }, 100);
            }
        });

        menuOverlay.addEventListener('click', function(e) {
            if (e.target === this) toggleMenu();
        });

        window.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (newsModal.classList.contains('active')) closeNewsModal();
                if (isMenuOpen) toggleMenu();
            }
        });

        function initLazyMap() {
            const mapIframe = document.getElementById('access-map');
            if (!mapIframe) return;
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const lazyIframe = entry.target;
                        const dataSrc = lazyIframe.getAttribute('data-src');
                        if (dataSrc) { lazyIframe.src = dataSrc; observer.unobserve(lazyIframe); }
                    }
                });
            }, { rootMargin: '300px' });
            observer.observe(mapIframe);
        }

        function initScrollAnimations() {
            const options = { root: null, rootMargin: '0px 0px -10% 0px', threshold: 0 };
            const observer = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        obs.unobserve(entry.target);
                    }
                });
            }, options);
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        function initNavHighlight() {
            const navLinks = document.querySelectorAll('#pc-nav-container a');
            const sections = Array.from(navLinks).map(link => {
                const id = link.getAttribute('href').replace('#', '');
                return document.getElementById(id);
            }).filter(sec => sec !== null);

            const options = {
                root: null,
                rootMargin: '-20% 0px -75% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.remove('nav-active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('nav-active');
                            }
                        });
                    }
                });
            }, options);

            sections.forEach(sec => observer.observe(sec));

            window.addEventListener('scroll', () => {
                if (window.scrollY < 200) {
                    navLinks.forEach(link => link.classList.remove('nav-active'));
                }
            }, { passive: true });
        }

        window.addEventListener('DOMContentLoaded', function() {
            document.documentElement.classList.add('smooth-scroll');

            const overlay = document.getElementById('opening-overlay');
            if (sessionStorage.getItem('visited')) {
                overlay.style.display = 'none';
            } else {
                sessionStorage.setItem('visited', 'true');
                setTimeout(function() { 
                    overlay.classList.add('overlay-hidden'); 
                    setTimeout(() => { overlay.style.display = 'none'; }, 1500);
                }, 1800);
            }
            
            renderContent();
            initLazyMap();
            initScrollAnimations();
            initNavHighlight();
            checkNavScroll();

            // マップのインタラクション開始処理 (スマホ・タブレット向け)
            const mapContainer = document.getElementById('map-container');
            if (mapContainer) {
                mapContainer.addEventListener('click', function() {
                    this.classList.add('is-active');
                });
            }

            const ssContainer = document.getElementById('access-slideshow');
            if (ssContainer) {
                ssContainer.addEventListener('click', function() {
                    this.classList.toggle('is-colored');
                });
            }
        });

        window.addEventListener('scroll', checkNavScroll, { passive: true });
    </script>
</body>

</html>


